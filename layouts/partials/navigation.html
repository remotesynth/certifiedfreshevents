<nav class="site-nav">
  <div class="site-nav-primary">
    <a href="/" class="flex items-center flex-shrink-0 mr-10">
      <img
        src="/img/logo.svg"
        alt="CFE.dev"
        class="h-16 lg:h-20">
    </a>

    <button
      type="button"
      class="flex items-center px-3 py-2 border rounded lg:hidden"
      data-nav-toggler>
      <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
    </button>
  </div>

  <div
    class="flex flex-col w-full gap-6 lg:flex-row lg:flex-grow lg:items-center lg:w-auto lg:not-sr-only site-nav-secondary"
    id="SiteNav">
    <ul
      class="flex flex-col items-center order-1 gap-6 lg:justify-start lg:flex-row lg:flex-grow"
      id="PrimaryNav">
      <li class="relative has-menu">
        <a
          href="/events/"
          class="flex items-center text-xl nav-link anim">
          Upcoming Events
          <svg class="hidden w-4 h-4 fill-current lg:inline-block" aria-hidden="true">
            <use xlink:href="/img/icons.svg#sm-cheveron-down"></use>
          </svg>
        </a>

        <!-- Meetups Sub-Nav -->
        <ul
          class="space-y-6 menu">
          {{ $upcoming := where (where .Site.RegularPages.Reverse "Section" "in" (slice "events" "talkshows")) ".Date" "ge" now }}
          {{ range $upcoming }}
            <li>
              <a href="{{ .RelPermalink }}" class="block px-6 leading-6 text-blue hover:text-java anim">
                <span class="block text-lg font-medium">{{ .Title }}</span>
                <time class="text-sm text-gray-700">
                  {{ dateFormat "Jan 2, 2006 3:04PM MST" .Date.Local }}
                </time>
              </a>
            </li>
          {{ end }}
            <li>
              <a href="/archive" class="block px-6 leading-6 text-blue hover:text-java anim">
                <span class="block text-lg font-medium">Browse Past Events</span>
              </a>
            </li>

          {{/*
          <li>
            <a
              href="/events/"
              class="flex items-center justify-center px-3 py-4 font-bold text-gray-700 rounded item-center has-nav-link-icon hover:bg-sand anim">
              Discover Meetups
              <svg aria-hidden="true" class="w-4 h-4 ml-1 fill-current">
                <use xlink:href="/img/icons.svg#sm-arrow-right"></use>
              </svg>
            </a>
          </li>
          */}}
        </ul>
      </li>
      <li class="relative has-menu">
        <a
          href="/sessions/"
          class="flex items-center text-xl nav-link anim">
          Recordings
          <svg class="hidden w-4 h-4 fill-current lg:inline-block " aria-hidden="true">
            <use xlink:href="/img/icons.svg#sm-cheveron-down"></use>
          </svg>
        </a>

        <!-- Sessions Nav -->
        <ul
          class="grid-cols-2 gap-6 p-6 menu menu-sessions">
          {{ range $key, $value := .Site.Taxonomies.categories}}
            {{ with site.GetPage (print "/categories/" $key) }}
              <li>
                <a href="{{.RelPermalink}}" class="flex block text-gray-800 has-nav-link-icon hover:text-java anim">
                  <div class="nav-link-icon bg-{{.Params.color }}">
                    <svg aria-hidden="true">
                      <use xlink:href="/img/icons.svg#{{.Params.icon}}"></use>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <span class="block text-sm text-lg">{{ .Title }}</span>
                    <span class="block text-xs text-gray-600">{{.Params.tagline}}</span>
                  </div>
                </a>
              </li>
            {{ end }}
          {{ end }}
          {{/*
          <li>
            <a
              href="/sessions/"
              class="flex items-center justify-center px-3 py-4 font-bold text-gray-700 rounded item-center has-nav-link-icon hover:bg-sand anim">
              Discover Sessions
              <svg aria-hidden="true" class="w-4 h-4 ml-1 fill-current">
                <use xlink:href="/img/icons.svg#sm-arrow-right"></use>
              </svg>
            </a>
          </li>
          */}}
        </ul>
      </li>
      {{ $talkshows := where .Site.RegularPages.Reverse "Section" "talkshow"}}
      {{ if len $talkshows }}
      <li class="relative has-menu">
        <a
          href="/talkshows/"
          class="flex items-center text-xl nav-link anim">
          Talk&nbsp;Shows
          <svg class="hidden w-4 h-4 fill-current lg:inline-block" aria-hidden="true">
            <use xlink:href="/img/icons.svg#sm-cheveron-down"></use>
          </svg>
        </a>

        <!-- Meetups Sub-Nav -->
        <ul
          class="space-y-6 menu">
            {{ range $talkshows }}
              <li>
                <a href="{{ .RelPermalink }}" class="block px-6 leading-6 text-blue hover:text-java anim">
                  <span class="block text-lg font-medium">{{ .Title }}</span>
                </a>
              </li>
            {{ end }}
        </ul>
      </li>
      {{ else }}
      <li class="text-center lg:text-left">
        <a
          href="/talkshows/"
          class="inline-block mt-6 mr-4 text-2xl text-center nav-link anim lg:mr-6 lg:inline-block lg:mt-0 lg:text-left lg:text-lg">
          Talk&nbsp;Shows
        </a>
      </li>
      {{ end }}
    </ul>
    <div
      class="flex flex-wrap items-center justify-center order-3 lg:justify-end lg:flex-grow lg:order-2"
      id="SecondaryNav">

      <!-- Search Toggler -->
      <button
        class="hidden font-bold text-gray-700 border-b-8 border-transparent hover:border-java lg:mr-6 lg:inline-block" aria-hidden="true" data-search-toggler
        aria-label="Toggle Search">
        <svg class="inline-block w-8 h-8 fill-current">
          <use xlink:href="/img/icons.svg#sm-search"></use>
        </svg>
        <span class="sr-only">Search</span>
      </button>

      <a
        href="/join/"
        class="inline-block px-4 py-2 leading-none text-center border border-b-2 rounded text-blue anim lg:mt-0 hover:bg-java hover:border-java hover:text-white">
        <span class="block mb-2 text-xs">Never miss an event</span>
        <span class="block font-bold">Join Our Mailing List</span>
      </a>
      <a
        href="/signup/manage/"
        class="hidden mt-6 mr-6 text-lg text-center nav-link anim lg:mt-0 lg:text-left">
        Manage Account
      </a>
    </div>

    <form
      class="flex items-stretch justify-center order-3 w-full max-w-2xl px-4 mx-auto mb-6 lg:mb-0 lg:w-1/2 lg:sr-only lg:order-2"
      id="Search" action="/search" method="get">
      <label class="sr-only" for="search">Enter search terms</label>
      <input
        name="search"
        type="text"
        id="searchInput"
        placeholder="Enter search terms"
        autocomplete="off"
        class="flex-1 mr-1 field">
      <button
        type="submit"
        class="button">
        <svg class="inline-block w-8 h-8 fill-current" aria-hidden="true">
          <use xlink:href="/img/icons.svg#sm-search"></use>
        </svg>
        <span class="sr-only">Search</span>
      </button>

      <button
        type="button"
        class="items-center justify-center hidden w-12 h-12 ml-2 close-button lg:inline-flex"
        aria-hidden="true"
        data-search-toggler
        aria-label="Toggle Search">
         <svg class="inline-block w-8 h-8 text-gray-900 fill-current">
          <use xlink:href="/img/icons.svg#sm-x"></use>
        </svg>
      </button>
    </form>

    <ul
    class="flex justify-center order-2 gap-4 lg:order-3 lg:justify-end">
      <li>
        <a
          href="{{.Site.Params.discord}}"
          class="inline-block text-discord"
          rel="noopener noreferrer">
          <i class="text-3xl fab fa-discord"></i>
        </a>
      </li>
      <li>
        <a
          href="{{.Site.Params.youtube}}"
          class="inline-block text-youtube"
          rel="noopener noreferrer">
          <i class="text-3xl fab fa-youtube"></i>
        </a>
      </li>
    </ul>
  </div>
</nav>
